<!doctype html>
<html>
    <head>
        <script src='/socket.io/socket.io.js'></script>
        <script>
			function addMessage(message) {
				messages = document.getElementById('messages');
				messages.innerHTML = '';
				for (i = 0; i < message[0].length; i++) {
					var text = document.createTextNode(message[0][i]);
                    el = document.createElement('li');
                    
					el.appendChild(text);
					messages.appendChild(el);
				}

            }
            var socket = io();

            socket.on('welcome', function(data) {
                // Respond with a message including this clients' id sent from the server
				connection = document.getElementById('connection');
				connection.innerHTML = 'Connesso';
				socket.emit('init_client', data);
            });
			
			function sendData(actionName, target) {
				socket.emit(actionName, JSON.parse(target), function(response) {
                    document.getElementById("response").innerHTML += "<hr>";
				    document.getElementById("response").innerHTML += JSON.stringify(JSON.parse(response), null, 4);
				} );
			}
        </script>
    </head>
    <body>
		<p>Hazard Server Debug Client</p>
		<form action="javascript:sendData(requestName.value, requestData.value)">
			Request Name:
			<input type="text" name="requestName" id="requestName" />
			<br>
			Request Data:
			<textarea name="requestData" id="requestData">Insert JSON Request here</textarea>
			<br>
			<input type="submit" value="Send" />
		</form>
		<pre id="response"></pre>
		<p id='connection'></p>
        <ul id='messages'></ul>
    </body>
</html>